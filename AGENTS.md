# macdiet: AGENTS.md（このリポジトリ配下に適用）

このリポジトリは `仕様書.md` に従い、macOSの「System Data（システムデータ）」肥大化要因を **分解して可視化 → 安全な改善提案 → 限定的に実行** する開発者向けCLI（OSS）を実装する。

## 最優先の参照

- 要件・安全モデル・UX要件・MVP条件は `仕様書.md` を一次情報として扱う。
- エージェント運用（タスク管理/レビュー/進め方）は `rules.md` を参照する。

## 進め方（必須）

- 作業は必ず `now-task.md` を更新してから着手し、節目で「進行中→完了済み」へ移動する。
- ある程度タスクが進んだら（目安: 3タスク/大きな設計変更/リリース前）、プロジェクト全体のレビューを行い `review.md` に残す。

## 安全モデル（必須）

- 既定は **R0（Read-only）**。`--apply` が無い限り一切の破壊操作をしない。
- 破壊操作は **ホワイトリスト化** された範囲のみ。原則は **Trash移動**、恒久削除は例外。
- 非TTY（パイプ/リダイレクト）では対話を禁止し、危険操作は失敗させる。
- stdoutは結果（`--json` 時はJSONのみ）、stderrは進捗・診断ログ。

## 実装の前提

- macOS専用（`tmutil`/`diskutil` など）を扱うため、プラットフォーム分離を徹底する。
- ネットワークアクセスが必要な作業は、必要性を明示しユーザーに確認してから行う（この環境では既定で制限される）。

